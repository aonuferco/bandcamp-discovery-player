<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Bandcamp Discovery</title>
    <link rel="preconnect" href="https://f4.bcbits.com" />
    <link rel="dns-prefetch" href="https://f4.bcbits.com" />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <!-- Sticky Header -->
    <header class="app-header">
      <div class="header-left">
        <div class="mode-buttons" role="group" aria-label="Album filter mode">
          <button id="new-releases-btn" class="mode-btn active" aria-label="Show new releases" aria-pressed="true">New</button>
          <button id="hot-btn" class="mode-btn" aria-label="Show hot albums" aria-pressed="false">Hot</button>
        </div>
      </div>

      <div class="header-center">
        <div class="search-container">
          <input
            type="text"
            id="genre-search"
            placeholder="Search genres..."
            autocomplete="off"
            role="combobox"
            aria-label="Search for a music genre"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-controls="genre-dropdown"
          />
          <div id="genre-dropdown" class="genre-dropdown" role="listbox" aria-label="Genre options"></div>
        </div>
      </div>

      <div class="header-right">
        <button id="help-btn" class="help-button" title="Keyboard shortcuts" aria-label="Open keyboard shortcuts help">
          ?
        </button>
      </div>
    </header>

    <!-- Main content wrapper with navigation -->
    <div class="content-wrapper">
      <button id="prev-btn" class="nav-btn nav-btn-prev" title="Previous (Q)" aria-label="Go to previous album">◀</button>
      
      <div id="album">
        <div class="cover-container">
          <img id="cover" src="" alt="Cover" />
          <div id="loading-spinner" class="loading-spinner">
            <div class="spinner"></div>
          </div>
          <div id="error-overlay" class="error-overlay hidden">
            <div class="error-icon">⚠️</div>
            <p class="error-message">Failed to load albums</p>
            <button id="retry-btn" class="retry-btn" aria-label="Retry loading albums">
              Retry
            </button>
          </div>
        </div>
        <h2 id="title"></h2>
        <h3 id="artist"></h3>
        <div id="track-info" class="track-info"></div>
        <div id="label-info" class="label-info"></div>
        <div id="track-count" class="track-count"></div>
        <div id="release-date" class="release-date"></div>
        <div class="player" id="player"></div>
      </div>
      
      <button id="next-btn" class="nav-btn nav-btn-next" title="Next (E)" aria-label="Go to next album">▶</button>
    </div>

    <!-- Toast notification container -->
    <div id="toast-container"></div>

    <!-- Help modal -->
    <div id="help-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Keyboard Shortcuts</h2>
          <button id="close-modal" class="close-btn" aria-label="Close dialog">&times;</button>
        </div>
        <div class="modal-body">
          <div class="shortcut-item">
            <kbd>Q</kbd>
            <span>Navigate to previous track</span>
          </div>
          <div class="shortcut-item">
            <kbd>E</kbd>
            <span>Navigate to next track</span>
          </div>
          <div class="shortcut-item">
            <kbd>W</kbd>
            <span>Copy album link to clipboard</span>
          </div>
          <div class="shortcut-item">
            <kbd>S</kbd>
            <span>Open album page in new tab</span>
          </div>
          <div class="shortcut-item">
            <kbd>Space</kbd>
            <span>Play/pause current track</span>
          </div>
          <div class="shortcut-item">
            <kbd>←</kbd>
            <span>Seek backward 10 seconds</span>
          </div>
          <div class="shortcut-item">
            <kbd>→</kbd>
            <span>Seek forward 10 seconds</span>
          </div>
          <div class="shortcut-item">
            <kbd>↑</kbd>
            <span>Increase volume</span>
          </div>
          <div class="shortcut-item">
            <kbd>↓</kbd>
            <span>Decrease volume</span>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="js/app.js"></script>
  </body>
</html>
